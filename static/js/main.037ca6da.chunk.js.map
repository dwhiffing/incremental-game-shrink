{"version":3,"sources":["App.js","index.js"],"names":["getCost","baseCost","level","pow","Math","floor","App","intervalRef","useRef","useState","progress","money","upgrade","tickLevel","state","setState","costs","contentLabels","buttonLabels","validators","unlocks","onTick","oldState","penalty","useEffect","tick","current","clearInterval","setInterval","className","style","margin","min","toFixed","Object","keys","map","key","display","height","alignItems","width","onClick","s","purchase","disabled","fontSize","transform","max","left","top","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qQAIMA,G,MAAU,SAACC,EAAUC,GAAX,IAAkBC,EAAlB,uDAAwB,KAAxB,OACdC,KAAKC,MAAMJ,EAAWG,KAAKD,IAAIA,EAAKD,MAsHvBI,MApHf,WACE,IAAMC,EAAcC,mBADP,EAEaC,mBAAS,CACjCC,SAAU,EACVC,MAAO,EACPC,QAAS,EACTC,UAAW,EACXX,MAAO,IAPI,mBAENY,EAFM,KAECC,EAFD,KAUPC,EAAQ,CACZd,MAAOF,EAAQ,EAAGc,EAAMZ,MAAQ,GAChCW,UAAWb,EAAQ,IAAKc,EAAMD,UAAW,GACzCD,QAASZ,EAAQ,IAAMc,EAAMF,QAAU,EAAG,IAEtCK,EAAgB,CACpBf,MAAM,IAAD,OAAMY,EAAMZ,MAAQY,EAAMF,QAA1B,aACLC,UAAU,kBAAD,OAAoB,IAAyB,IAAlBC,EAAMD,UAAjC,MACTD,QAAQ,WAAD,OAAaE,EAAMF,UAEtBM,EAAe,CACnBhB,MAAO,UACPW,UAAW,eACXD,QAAS,WAELO,EAAa,CACjBjB,MAAOY,EAAMH,MAAQK,EAAMd,MAC3BW,UAAWC,EAAMH,MAAQK,EAAMH,WAAaC,EAAMD,WAAa,EAC/DD,QAASE,EAAMH,MAAQK,EAAMJ,SAEzBQ,EAAU,CACdlB,MAAO,EACPW,UAAW,IACXD,QAAS,KAaLS,EAAS,WACbN,GAAS,SAACO,GACR,IAAMC,EAAU,EAAID,EAASZ,SApDd,IAqDf,OAAO,eACFY,EADL,CAEEZ,SACEY,EAASZ,SAAWY,EAASpB,MAAQoB,EAASV,QAAUW,EAC1DZ,MAAOW,EAASX,MAAQW,EAASpB,MAAQoB,EAASV,cAcxD,OATAY,qBAAU,WACR,IAAMC,EAAO,IAAyB,IAAlBX,EAAMD,UAG1B,OAFAN,EAAYmB,SAAWC,cAAcpB,EAAYmB,SACjDnB,EAAYmB,QAAUE,YAAYP,EAAQI,GACnC,WACLE,cAAcpB,EAAYmB,YAE3B,CAACZ,EAAMD,YAGR,6BACE,yBAAKgB,UAAU,QACb,uBAAGC,MAAO,CAAEC,OAAQ,WAApB,WAAyCjB,EAAMH,OAC/C,uBAAGmB,MAAO,CAAEC,OAAQ,WAApB,aACa3B,KAAK4B,IAAI,KAAMlB,EAAMJ,SAAW,GAAK,KAAKuB,QAAQ,GAAK,KAEnEC,OAAOC,KAAKnB,GAAOoB,KAClB,SAACC,GAAD,OACEvB,EAAMJ,UAAYU,EAAQiB,IACxB,yBACEA,IAAKA,EACLP,MAAO,CACLC,OAAQ,SACRO,QAAS,OACTC,OAAQ,GACRC,WAAY,WAGd,yBAAKV,MAAO,CAAEW,MAAO,MACnB,2BAAI,CAACxB,EAAcoB,MAErB,4BACEK,QAAS,kBAtDR,SAACL,GACZrB,EAAMqB,IAAQvB,EAAMH,OACtBI,GAAS,SAAC4B,GAAD,4BACJA,GADI,mBAENN,EAAMM,EAAEN,GAAO,GAFT,sBAGAM,EAAEhC,MAAQK,EAAMqB,IAHhB,OAoDkBO,CAASP,IACxBQ,SAAU1B,EAAWkB,GACrBP,MAAO,CAAEW,MAAO,IAAKF,OAAQ,KAE5B,CAACrB,EAAamB,IALjB,MAK2BrB,EAAMqB,GALjC,UAWV,iCACE,uBACEP,MAAO,CACLgB,SAAU,IACVC,UAAU,SAAD,OAAW3C,KAAK4C,IAAI,EA5GpB,IA4GsClC,EAAMJ,UAA5C,KACTuC,KAAM,GACNC,IAAK,MALT,oCCvGRC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.037ca6da.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport './App.css'\n\nconst TARGET_VALUE = 10000\nconst getCost = (baseCost, level, pow = 1.15) =>\n  Math.floor(baseCost * Math.pow(pow, level))\n\nfunction App() {\n  const intervalRef = useRef()\n  const [state, setState] = useState({\n    progress: 0,\n    money: 0,\n    upgrade: 1,\n    tickLevel: 0,\n    level: 1,\n  })\n\n  const costs = {\n    level: getCost(5, state.level - 1),\n    tickLevel: getCost(150, state.tickLevel, 2),\n    upgrade: getCost(1000, state.upgrade - 1, 2),\n  }\n  const contentLabels = {\n    level: `$${state.level * state.upgrade} per tick`,\n    tickLevel: `one tick every ${1000 - state.tickLevel * 100}ms`,\n    upgrade: `money x ${state.upgrade}`,\n  }\n  const buttonLabels = {\n    level: 'Upgrade',\n    tickLevel: 'Upgrade tick',\n    upgrade: 'Doubler',\n  }\n  const validators = {\n    level: state.money < costs.level,\n    tickLevel: state.money < costs.tickLevel || state.tickLevel >= 9,\n    upgrade: state.money < costs.upgrade,\n  }\n  const unlocks = {\n    level: 0,\n    tickLevel: 150,\n    upgrade: 1000,\n  }\n\n  const purchase = (key) => {\n    if (costs[key] <= state.money) {\n      setState((s) => ({\n        ...s,\n        [key]: s[key] + 1,\n        money: s.money - costs[key],\n      }))\n    }\n  }\n\n  const onTick = () => {\n    setState((oldState) => {\n      const penalty = 1 - oldState.progress / TARGET_VALUE\n      return {\n        ...oldState,\n        progress:\n          oldState.progress + oldState.level * oldState.upgrade * penalty,\n        money: oldState.money + oldState.level * oldState.upgrade,\n      }\n    })\n  }\n\n  useEffect(() => {\n    const tick = 1000 - state.tickLevel * 100\n    intervalRef.current && clearInterval(intervalRef.current)\n    intervalRef.current = setInterval(onTick, tick)\n    return () => {\n      clearInterval(intervalRef.current)\n    }\n  }, [state.tickLevel])\n\n  return (\n    <div>\n      <div className=\"menu\">\n        <p style={{ margin: '10px 0' }}>money: ${state.money}</p>\n        <p style={{ margin: '10px 0' }}>\n          progress: {Math.min(100, (state.progress + 1) / 100).toFixed(4) + '%'}\n        </p>\n        {Object.keys(costs).map(\n          (key) =>\n            state.progress >= unlocks[key] && (\n              <div\n                key={key}\n                style={{\n                  margin: '10px 0',\n                  display: 'flex',\n                  height: 40,\n                  alignItems: 'center',\n                }}\n              >\n                <div style={{ width: 250 }}>\n                  <p>{[contentLabels[key]]}</p>\n                </div>\n                <button\n                  onClick={() => purchase(key)}\n                  disabled={validators[key]}\n                  style={{ width: 150, height: 35 }}\n                >\n                  {[buttonLabels[key]]} (${costs[key]})\n                </button>\n              </div>\n            ),\n        )}\n      </div>\n      <section>\n        <p\n          style={{\n            fontSize: 200,\n            transform: `scale(${Math.max(1, TARGET_VALUE - state.progress)})`,\n            left: 20,\n            top: 100,\n          }}\n        >\n          If you can read this you win!\n        </p>\n      </section>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}